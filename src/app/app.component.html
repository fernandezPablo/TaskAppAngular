<div class="container">
  <div class="row">
    <a href="#top"></a>
    <div class="col-10 card bg-secondary">
      <h4 class="text-center mt-1" *ngIf="!editMode;else templateElseTitle">Nueva Tarea</h4>
      <ng-template #templateElseTitle>
        <h4 class="text-center mt-1">Editar Tarea</h4>
      </ng-template>
      <div class="form-group">
        <label for="description">Descripcion</label>
        <input type="text" id="desciption" class="form-control" placeholder="Descripcion" [(ngModel)]="description" *ngIf="!errorDescription;else templateErrorDescription" (focus)="highlight($event)" (focusout)="blur($event)" #controlDescription>
        <ng-template #templateErrorDescription>
          <input type="text" id="desciption" class="form-control" placeholder="Descripcion" [(ngModel)]="description" appErrorHighlight>
        </ng-template>
      </div>
      <div class="form-group">
        <label for="date">Fecha</label>
        <input type="date" id="date" class="form-control" placeholder="Fecha" [(ngModel)]="date" #controlDate *ngIf="!errorDate;else templateErrorDate" (focus)="highlight($event)" (focusout)="blur($event)">
        <ng-template #templateErrorDate>
          <input type="date" id="date" class="form-control" placeholder="Fecha" [(ngModel)]="date" #controlDate appErrorHighlight>
        </ng-template>
      </div>
      <div class="form-check">
        <input type="checkbox" id="status" class="form-check-input" [(ngModel)]="status" #controlStatus>
        <label for="status">Estado</label>
      </div>
      <div class="form-group">
        <button type="button" class="btn btn-info form-control" *ngIf="!editMode;else templateEditMode" (click)="addTask(description,date,status)">Crear Tarea</button>
        <ng-template #templateEditMode>
          <button type="button" class="btn btn-edit form-control" (click)="editTask(description,date,status)">Editar Tarea</button>
        </ng-template>
      </div>
    </div>
    <div class="col-10 alert alert-danger text-center mt-1" role="alert" *ngIf="errorDescription || errorDescription">
      <span>
        Faltan completar algunos campos
      </span>
    </div>
  </div>
</div>

<app-task-list [data]="tasks" (taskChanged)="taskChangeHandler($event)"></app-task-list>
